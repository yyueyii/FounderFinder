{"ast":null,"code":"import _objectSpread from\"@babel/runtime/helpers/objectSpread2\";import invariant from'fbjs/lib/invariant';class TaskQueue{constructor(_ref){var onMoreTasks=_ref.onMoreTasks;this._onMoreTasks=onMoreTasks;this._queueStack=[{tasks:[],popable:true}];}enqueue(task){this._getCurrentQueue().push(task);}enqueueTasks(tasks){tasks.forEach(task=>this.enqueue(task));}cancelTasks(tasksToCancel){this._queueStack=this._queueStack.map(queue=>_objectSpread(_objectSpread({},queue),{},{tasks:queue.tasks.filter(task=>tasksToCancel.indexOf(task)===-1)})).filter((queue,idx)=>queue.tasks.length>0||idx===0);}hasTasksToProcess(){return this._getCurrentQueue().length>0;}processNext(){var queue=this._getCurrentQueue();if(queue.length){var task=queue.shift();try{if(typeof task==='object'&&task.gen){this._genPromise(task);}else if(typeof task==='object'&&task.run){task.run();}else{invariant(typeof task==='function','Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(task,null,2));task();}}catch(e){e.message='TaskQueue: Error with task '+(task.name||'')+': '+e.message;throw e;}}}_getCurrentQueue(){var stackIdx=this._queueStack.length-1;var queue=this._queueStack[stackIdx];if(queue.popable&&queue.tasks.length===0&&stackIdx>0){this._queueStack.pop();return this._getCurrentQueue();}else{return queue.tasks;}}_genPromise(task){var length=this._queueStack.push({tasks:[],popable:false});var stackIdx=length-1;var stackItem=this._queueStack[stackIdx];task.gen().then(()=>{stackItem.popable=true;this.hasTasksToProcess()&&this._onMoreTasks();}).catch(ex=>{setTimeout(()=>{ex.message=\"TaskQueue: Error resolving Promise in task \"+task.name+\": \"+ex.message;throw ex;},0);});}}export default TaskQueue;","map":{"version":3,"names":["_objectSpread","invariant","TaskQueue","constructor","_ref","onMoreTasks","_onMoreTasks","_queueStack","tasks","popable","enqueue","task","_getCurrentQueue","push","enqueueTasks","forEach","cancelTasks","tasksToCancel","map","queue","filter","indexOf","idx","length","hasTasksToProcess","processNext","shift","gen","_genPromise","run","JSON","stringify","e","message","name","stackIdx","pop","stackItem","then","catch","ex","setTimeout"],"sources":["/Users/apple/FounderFinder/node_modules/react-native-web/dist/exports/InteractionManager/TaskQueue.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/objectSpread2\";\n/**\n * Copyright (c) Nicolas Gallagher.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nimport invariant from 'fbjs/lib/invariant';\nclass TaskQueue {\n  constructor(_ref) {\n    var onMoreTasks = _ref.onMoreTasks;\n    this._onMoreTasks = onMoreTasks;\n    this._queueStack = [{\n      tasks: [],\n      popable: true\n    }];\n  }\n  enqueue(task) {\n    this._getCurrentQueue().push(task);\n  }\n  enqueueTasks(tasks) {\n    tasks.forEach(task => this.enqueue(task));\n  }\n  cancelTasks(tasksToCancel) {\n    this._queueStack = this._queueStack.map(queue => _objectSpread(_objectSpread({}, queue), {}, {\n      tasks: queue.tasks.filter(task => tasksToCancel.indexOf(task) === -1)\n    })).filter((queue, idx) => queue.tasks.length > 0 || idx === 0);\n  }\n  hasTasksToProcess() {\n    return this._getCurrentQueue().length > 0;\n  }\n\n  /**\n   * Executes the next task in the queue.\n   */\n  processNext() {\n    var queue = this._getCurrentQueue();\n    if (queue.length) {\n      var task = queue.shift();\n      try {\n        if (typeof task === 'object' && task.gen) {\n          this._genPromise(task);\n        } else if (typeof task === 'object' && task.run) {\n          task.run();\n        } else {\n          invariant(typeof task === 'function', 'Expected Function, SimpleTask, or PromiseTask, but got:\\n' + JSON.stringify(task, null, 2));\n          task();\n        }\n      } catch (e) {\n        e.message = 'TaskQueue: Error with task ' + (task.name || '') + ': ' + e.message;\n        throw e;\n      }\n    }\n  }\n  _getCurrentQueue() {\n    var stackIdx = this._queueStack.length - 1;\n    var queue = this._queueStack[stackIdx];\n    if (queue.popable && queue.tasks.length === 0 && stackIdx > 0) {\n      this._queueStack.pop();\n      return this._getCurrentQueue();\n    } else {\n      return queue.tasks;\n    }\n  }\n  _genPromise(task) {\n    var length = this._queueStack.push({\n      tasks: [],\n      popable: false\n    });\n    var stackIdx = length - 1;\n    var stackItem = this._queueStack[stackIdx];\n    task.gen().then(() => {\n      stackItem.popable = true;\n      this.hasTasksToProcess() && this._onMoreTasks();\n    }).catch(ex => {\n      setTimeout(() => {\n        ex.message = \"TaskQueue: Error resolving Promise in task \" + task.name + \": \" + ex.message;\n        throw ex;\n      }, 0);\n    });\n  }\n}\nexport default TaskQueue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}